import { HttpClient } from '@angular/common/http';
import { Component } from '@angular/core';
import { TranslateService } from '@ngx-translate/core';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.css'],
})
export class AppComponent {
  taxids =
    '55906269,82946954,28671465,80241213,94998251,86571160,24490111,97266342,85989081,53409940,77691093,61904541,90799239,53289473,53761823,42560969,56671493,24325561,05601093,12781249,83278614,86873340,29158583,53113518,20092082,28459766,54832494,27395630,54513359,70468859,12012403,53773166,85092803,53390718,52865125,29149023,22119185,54660957,69532853,91058661,15683376,34391152,24563182,33999089,89999982,86249938,52819919,12952572,53876705,36110902,97463596,70688241,40671829,23997652,07529203,24456606,50970277,84695004,54059626,12687672,04126516,80071054,70578498,54616361,90458598,12908422,24332747,16862123,72888857,97173702,84797608,69044072,46804804,16252950,80666359,16014043,88773780,16436873,04208143,91241464,04132622,53777352,18251507,80595926,70551456,42982686,53723693,28748577,14101606,82964951,23292583,27784981,70848660,22689235,12883169,24477193,04738375,70386983,53857123,53783283,20969962,90511524,70551456,83123990,82852512,49890000,13068489,90455797,70551456,68896807,76014406,16402655,90675321,54970685,27978044,47718026,53021433,54173794,16407172,27539284,12386676,25159391,24660184,89362336,50777765,28107616,16633261,59334664,53685706,28497918,49739075,01188170,28292176,27423621,80360792,83763995,42948745,80280762,86370255,70551456,23400204,12702977,54806475,11333835,86710418,27932982,70551456,16366525,23416796,16574349,72955757,80505523,27335612,21247036,29034248,12472927,16363695,28208184,84149081,27309403,30836674,01059555,54310973,24267485,70469463,27309852,85033143,53723151,28114638,69905706,13004535,97440932,97476543,91044175,86451812,12976407,23925709,52511664,30892099,25132669,85075950,45192334,28340542,13055098,70551456,23686968,12342636,70392248,28670775,52563331,54710197,83293066,27553715,28137533,86287691,27920769,70376423,27535576,54777020,47862984,27408179,91036301,12809422,45610604,24418370,25003052,81154052,25185996,12420533,86489985,54720553,03735202,70561948,12650197,30338509,89961509,54665566,42834068,48401546,24559624,53529706,90451791,28014737,42746136,22099863,04191585,54224230,27987466,16204748,23752170,03729709,16769273,52724250,80585589,08937706,52784735,54105473,12998562,20082774,69310466,52354361,86001605,84907561,86684122,82796548,70551456,51016167,54230303,24976661,25010574,47098980,28684742,27596257,03457805,91567601,28413220,12672208,27584148,77125513,28169696,91040760,20374028,84613741,45140738,84944658,54751289,23857694,86885444,69115908,16299673,70551456,80115855,50861539,90291535,20765242,12508116,59139260,28183894,11170662,83064752,53356021,53670366,55825230,83609327,29088644,90196949,12292039,24645277,82492833,82817585,10569621,53890045,24268816,70690844,57939195,85128387,83654238,89462813,85366985,16732184,24452051,59169432,53527361,28835994,52359957,42369484,70447341,84700132,20082774,89700287,86444469,76400527,12750132,54678555,84525536,96934325,22812468,22608851,54263710,04881370,45699939,85074050,00967369,53715954,42971745,97091596,56602519,53485025,13029297,89211838,28723560,42939099,68773283,90678517';
  title = 'demo2';
  param = { value: 'world' };
  currLang = 'tw';

  businessData: any[] = [];

  multiply = (x) => {
    return (y) => {
      return x * y;
    };
  };

  constructor(private translate: TranslateService, private http: HttpClient) {
    translate.setDefaultLang('tw');
    translate.use('tw');
  }

  test() {
    console.log(this.multiply(2)(6));
    this.translate.use(this.currLang);

    console.log(this.translate.instant('HOME.WELCOME', { name: 'Allen' }));
  }

  test2() {
    let taxid: string[] = this.taxids.split(',');

    for (let i = 0; i < taxid.length; i++) {
      this.http
        .get(`https://eip.fia.gov.tw/OAI/api/businessRegistration/${taxid[i]}`)
        .subscribe(
          (r: any) => {
            this.businessData.push({ ban: taxid[i], businessNm: r.businessNm, color: 'black' });
          },
          (e) => {
            this.businessData.push({ ban: taxid[i], businessNm: null, color: 'red' });
          }
        );
    }
  }
}
